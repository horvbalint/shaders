<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Trippy circles</title>
  </head>

  <script type="text/javascript" src="https://rawgit.com/patriciogonzalezvivo/glslCanvas/master/dist/GlslCanvas.js"></script>

  <style>
    * {
      margin: 0;
      box-sizing: border-box;
      background: black;
    }
    body {
      position: fixed;
      top: 0;
      left: 0;
      bottom: 0;
      right: 0;
    }
  </style>

  <body>
    <canvas class="glslCanvas" data-fragment-url="trippy-circles.glsl"></canvas>

    <script>
      let canvas = document.querySelector('.glslCanvas')
      canvas.width = document.body.clientWidth
      canvas.height = document.body.clientHeight

      window.addEventListener('resize', () => {
        canvas.width = document.body.clientWidth
        canvas.height = document.body.clientHeight
      })

      let lastClickAt = 0
      
      canvas.addEventListener('click', () => {
        let now = performance.now()

        if(now-lastClickAt < 240)
          toggleFullScreen()

        lastClickAt = now
      })

      function toggleFullScreen() {
        if(!document.fullscreenElement) {
          return document.documentElement.requestFullscreen()
        }
        else {
          if(document.exitFullscreen)
            return document.exitFullscreen()
          else
            return Promise.reject()
        }
      }
    </script>
  </body>
</html>